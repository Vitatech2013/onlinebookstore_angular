<div class="container-fluid table-responsive py-5"> 
    <table class="table table-bordered table-hover text-center align-middle">
      <thead class="table-dark">
        <tr>
          
          <th scope="col">S.No</th>
          <th scope="col">Shop-Keeper</th>
          <th scope="col">Category</th>
          <th scope="col">Sub-Category</th>
          <th scope="col">Book-Name</th>
          <th scope="col">Authour</th>
          <th scope="col">Publisher</th>
          <th scope="col">Volumes</th>
          <th scope="col">Price</th>
          <th scope="col">Type</th>
          <th scope="col">Image</th>
          <th scope="col">Download</th>
          <th scope="col">Actons</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let b of allBooks index as i">
          <td>{{i+1}}</td>
          <td>{{b.username}}</td>
          <td>{{b.category}}</td>
          <td>{{b.subcategory}}</td>
          <td>{{b.bookname}}</td>
          <td>{{b.author}}</td>
          <td>{{b.publisher}}</td>
          <td>{{b.volume}}</td>
          <td>{{b.price}}</td>
          <td>{{b.type}}</td>
          <td class="w-10p"><img src="{{b.image}}" ></td>
          <td> <i class="bi bi-arrow-down-circle-fill" style="font-size: 2em; color: rgb(37, 105, 233);" (click)="downloadBook(b.file)"></i></td>
          <td>
            <i class="bi bi-pencil-square" style="font-size: 1.5em; color:blue;" (click)="editBook(b)"></i> &nbsp;
            <i class="bi bi-trash3-fill" style="font-size: 1.5em; color: red;" (click)="deleteBook(b._id)"></i>
          </td>
        </tr>
      </tbody>
    </table>
    </div>
    
<!-- Edit Dialog Box -->


    <dialog id="editbook">
      <div class="container-fluid">
        <div class="col-sm-12 m-auto">
        <div class="card">
        <div class="card-header text-center">
            <h2>Add Book</h2>
        </div>
        <div class="card-body">
        <form [formGroup]="editBookForm" (ngSubmit)="updateBook()">
        <div class="row mb-4 mt-4">
            <div class="col-sm-4">
                <div class="form-group">
                    <label>Category</label>
                    <select class="form-select" formControlName="category" (change)="isCategory($any($event.target).value)">
                      <option *ngFor="let c of categories" value="{{c}}">{{c}}</option>
                    </select>
                  </div>
            </div>
            <div class="col-sm-4">
                <div class="form-group">
                    <label>Sub-Category</label>
                    <select class="form-select" formControlName="subcategory">
                      <option *ngFor="let s of subcategories" value="{{s.name}}">{{s.name}}</option>
                    </select>
                  </div>
            </div>
            <div class="col-sm-4">
                <div class="form-group">
                    <label>Book name</label>
                    <input type="text" class="form-control" formControlName="bookname">
                  </div>
            </div>
        </div>
        <div class="row mb-4">
            <div class="col-sm-4">
                <div class="form-group">
                    <label>Author</label>
                    <input type="text" class="form-control" formControlName="author">
                  </div>
            </div>
            <div class="col-sm-4">
                <div class="form-group">
                    <label>Publisher</label>
                    <input type="text" class="form-control" formControlName="publisher">
                  </div>
            </div>
            <div class="col-sm-4">
                <div class="form-group">
                    <label>Volume</label>
                    <input type="number" class="form-control" formControlName="volume">
                  </div>
            </div>
        </div>
        <div class="row mb-4">
            <div class="col-sm-3">
                <div class="form-group">
                    <label>Type</label>
                    <select class="form-select" formControlName="type">
                      <option value="free">Free</option>
                      <option value="cost">Cost</option>
                    </select>
                  </div>
            </div>
            <div class="col-sm-3">
                <div class="form-group">
                    <label>Price</label>
                    <input type="number" class="form-control" formControlName="price">
                  </div>
            </div>
            <div class="col-sm-3">
                <div class="form-group">
                    <label>upload image</label>
                    <input type="file" accept="image/*" class="form-control" (change)="onSelectImage($event)">
                  </div>
            </div>
            <div class="col-sm-3">
                <div class="form-group">
                    <label>upload book</label>
                    <input type="file" accept = "application/*" class="form-control" (change)="onSelectFile($event)">
                  </div>
            </div>
        </div>
        <div class="text-center">
          <button class="btn btn-dark" onclick="editbook.close()">Close</button> &nbsp;
            <button type="submit" class="btn btn-primary">Update book</button>
        </div>
          </form>
        </div>
      </div>
    </div>
    </div>       
    </dialog>